---
import { db } from "astro:db";

const emails = await db.select().from(NewsletterPeeps);

const listFormatter = new Intl.ListFormat("en-gb");

const emailList = listFormatter.format(emails.map((e) => e.email));
---

<footer class="p-12">
  <div class="py-6">{emailList}</div>
  <form id="newsletter-form">
    <div
      class="bg-white shadow rounded-full py-2 px-4 focus-within:ring-4 ring-accent2 transition-shadow flex gap-4"
    >
      <input
        type="email"
        name="email"
        class="focus:outline-none"
        placeholder="Enter Email"
        required
      />
    </div>
    <button>Subscribe</button>
  </form>
</footer>